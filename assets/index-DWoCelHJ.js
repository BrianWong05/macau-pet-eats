import{j as e,u as T,s as j}from"./index-IO_Hw95i.js";import{r as c}from"./react-vendor-B-2HpIm1.js";import{R as N,X as b,O as S,q as k,Q as q,J as d}from"./ui-vendor-r0va27WY.js";import"./supabase-K6a4hp2a.js";function A({newForm:t,setNewForm:l,onAdd:u,onCancel:r}){return e.jsx("div",{className:"bg-white rounded-xl shadow-card p-4 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Name (key)",value:t.name,onChange:s=>l({...t,name:s.target.value}),className:"px-3 py-2 border border-neutral-200 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"中文名稱",value:t.name_zh,onChange:s=>l({...t,name_zh:s.target.value}),className:"px-3 py-2 border border-neutral-200 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"Nome PT",value:t.name_pt,onChange:s=>l({...t,name_pt:s.target.value}),className:"px-3 py-2 border border-neutral-200 rounded-lg"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:u,className:"flex-1 px-3 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:e.jsx(N,{size:18,className:"mx-auto"})}),e.jsx("button",{onClick:r,className:"px-3 py-2 bg-neutral-200 text-neutral-600 rounded-lg hover:bg-neutral-300 transition-colors",children:e.jsx(b,{size:18})})]})]})})}function E({cuisineTypes:t,isLoading:l,editingId:u,editForm:r,setEditForm:s,onEdit:g,onSave:x,onCancelEdit:o,onDelete:h}){return e.jsx("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:l?e.jsx("div",{className:"p-8 text-center text-neutral-500",children:"Loading..."}):t.length===0?e.jsx("div",{className:"p-8 text-center text-neutral-500",children:"No cuisine types"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-neutral-600",children:"Key"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-neutral-600",children:"中文"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-neutral-600",children:"PT"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-neutral-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-100",children:t.map(n=>e.jsx("tr",{className:"hover:bg-neutral-50",children:u===n.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"text",value:r.name,onChange:i=>s({...r,name:i.target.value}),className:"w-full px-2 py-1 border border-neutral-200 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"text",value:r.name_zh,onChange:i=>s({...r,name_zh:i.target.value}),className:"w-full px-2 py-1 border border-neutral-200 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"text",value:r.name_pt,onChange:i=>s({...r,name_pt:i.target.value}),className:"w-full px-2 py-1 border border-neutral-200 rounded"})}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("button",{onClick:()=>x(n.id),className:"p-1.5 text-primary-600 hover:bg-primary-50 rounded",children:e.jsx(N,{size:16})}),e.jsx("button",{onClick:o,className:"p-1.5 text-neutral-500 hover:bg-neutral-100 rounded ml-1",children:e.jsx(b,{size:16})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-900",children:n.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:n.name_zh||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:n.name_pt||"-"}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("button",{onClick:()=>g(n),className:"p-1.5 text-neutral-500 hover:bg-neutral-100 rounded",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>h(n.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded ml-1",children:e.jsx(k,{size:16})})]})]})},n.id))})]})})}function O(){const{t}=T(),[l,u]=c.useState([]),[r,s]=c.useState(!0),[g,x]=c.useState(null),[o,h]=c.useState({name:"",name_zh:"",name_pt:""}),[n,i]=c.useState(!1),[p,f]=c.useState({name:"",name_zh:"",name_pt:""}),y=async()=>{s(!0);const{data:a,error:m}=await j.from("cuisine_types").select("*").order("sort_order",{ascending:!0});!m&&a&&u(a),s(!1)};c.useEffect(()=>{y()},[]);const _=async()=>{if(!p.name.trim()){d.error("Name is required");return}const a=l.length>0?Math.max(...l.map(w=>w.sort_order)):0,{error:m}=await j.from("cuisine_types").insert({name:p.name.toLowerCase().trim(),name_zh:p.name_zh.trim()||null,name_pt:p.name_pt.trim()||null,sort_order:a+1});m?d.error("Failed to add cuisine type"):(d.success("Cuisine type added"),f({name:"",name_zh:"",name_pt:""}),i(!1),y())},v=a=>{x(a.id),h({name:a.name,name_zh:a.name_zh||"",name_pt:a.name_pt||""})},C=async a=>{if(!o.name.trim()){d.error("Name is required");return}const{error:m}=await j.from("cuisine_types").update({name:o.name.toLowerCase().trim(),name_zh:o.name_zh.trim()||null,name_pt:o.name_pt.trim()||null}).eq("id",a);m?d.error("Failed to update"):(d.success("Updated"),x(null),y())},z=async a=>{if(!confirm("Delete this cuisine type?"))return;const{error:m}=await j.from("cuisine_types").delete().eq("id",a);m?d.error("Failed to delete"):(d.success("Deleted"),y())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:t("admin.cuisineTypes.title")}),e.jsx("p",{className:"text-neutral-500",children:t("admin.cuisineTypes.subtitle")})]}),!n&&e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-xl transition-colors",children:[e.jsx(q,{size:18}),t("admin.cuisineTypes.add")]})]}),n&&e.jsx(A,{newForm:p,setNewForm:f,onAdd:_,onCancel:()=>{i(!1),f({name:"",name_zh:"",name_pt:""})}}),e.jsx(E,{cuisineTypes:l,isLoading:r,editingId:g,editForm:o,setEditForm:h,onEdit:v,onSave:C,onCancelEdit:()=>x(null),onDelete:z})]})}export{O as AdminCuisineTypes};
