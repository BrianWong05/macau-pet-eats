import{u as g,a as R,j as e,b as Y,s as k}from"./index-Cwj2wa9J.js";import{L as z,r as o,i as W}from"./react-vendor-B-2HpIm1.js";import{A as B}from"./index-eNBQQs1S.js";import{L as X}from"./index-C5kaJa95.js";import{A as F,L as J,b as P,c as Q,U as q,N as Z,i as D,F as ee,g as H,E as se,j as te,I as re,G as ae,k as ne,l as le,m as U,n as I,o as C,p as ie,X as A,q as oe}from"./ui-vendor-1tFYE1Xe.js";import{g as _,P as ce}from"./index-DHFcRUdy.js";import{g as de}from"./mapUtils-Dr1D9bNV.js";import"./supabase-K6a4hp2a.js";function me({isScrolled:s,onLoginClick:a}){const{t:l}=g(),{user:r,signOut:t}=R();return e.jsx("header",{className:`
        fixed top-0 left-0 right-0 z-50 transition-all duration-300
        ${s?"bg-white/80 backdrop-blur-md shadow-sm py-3":"bg-transparent py-4"}
      `,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[e.jsxs(z,{to:"/",className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all ${s?"text-neutral-600 hover:bg-neutral-100":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30"}`,children:[e.jsx(F,{size:20}),e.jsx("span",{className:"font-medium hidden sm:block",children:l("restaurant.backToList")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r?e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:`text-sm font-medium hidden sm:block ${s?"text-neutral-700":"text-white drop-shadow-md"}`,children:r.email}),e.jsx("button",{onClick:()=>t(),className:`p-2 rounded-full transition-all ${s?"bg-white shadow-sm text-neutral-600 hover:text-red-600":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30"}`,title:l("auth.logout")||"Logout",children:e.jsx(J,{size:20})})]}):e.jsxs("button",{onClick:a,className:`flex items-center gap-2 px-4 py-2 rounded-full shadow-sm hover:shadow-md transition-all font-medium ${s?"bg-white text-neutral-700":"bg-white/90 backdrop-blur-sm text-neutral-700"}`,children:[e.jsx(P,{size:18}),e.jsx("span",{children:l("auth.login")||"Login"})]}),e.jsxs(z,{to:"/submit",className:`flex items-center gap-2 px-4 py-2 rounded-full shadow-sm hover:shadow-md transition-all font-medium ${s?"bg-white text-neutral-700":"bg-white/90 backdrop-blur-sm text-neutral-700"}`,children:[e.jsx(Q,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:l("nav.submit")})]}),e.jsx("div",{className:s?"":"bg-white/20 backdrop-blur-sm rounded-lg",children:e.jsx(X,{})})]})]})})}function ue({restaurant:s,lang:a}){const{getLocalizedName:l}=Y(),r=_(s,"name",a),t=_(s,"cuisine_type","en");return e.jsxs("div",{className:"relative h-64 md:h-96",children:[e.jsx("img",{src:s.image_url||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=1200",alt:r,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3 drop-shadow-lg",children:r}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(ce,{policy:s.pet_policy,size:"lg"}),t.map((n,c)=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/90 backdrop-blur-sm text-sm font-medium text-neutral-700 rounded-full",children:[e.jsx(q,{size:14}),l(n,a)]},c))]})]})})]})}function xe({restaurant:s,onReportClick:a}){const{t:l}=g(),r=()=>{if(!s)return"#";const{latitude:n,longitude:c,name:x}=s;return`https://www.google.com/maps/search/?api=1&query=${n},${c}&query_place_id=${encodeURIComponent(x)}`},t=()=>s?.contact_info?`tel:${s.contact_info.replace(/\s/g,"")}`:"#";return e.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[e.jsxs("a",{href:r(),target:"_blank",rel:"noopener noreferrer",className:"flex-1 min-w-[140px] inline-flex items-center justify-center gap-2 px-6 py-4 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",children:[e.jsx(Z,{size:20}),l("restaurant.getDirections")]}),s.contact_info&&e.jsxs("a",{href:t(),className:"flex-1 min-w-[140px] inline-flex items-center justify-center gap-2 px-6 py-4 bg-white border-2 border-neutral-200 hover:border-primary-300 text-neutral-700 font-semibold rounded-xl shadow-soft hover:shadow-lg transition-all",children:[e.jsx(D,{size:20}),l("restaurant.callNow")]}),e.jsxs("button",{onClick:a,className:"flex-1 min-w-[140px] inline-flex items-center justify-center gap-2 px-6 py-4 bg-white border-2 border-neutral-200 hover:border-amber-300 text-neutral-700 font-semibold rounded-xl shadow-soft hover:shadow-lg transition-all",children:[e.jsx(ee,{size:20}),l("restaurant.reportUpdate")]})]})}function he({restaurant:s,lang:a}){const{t:l}=g(),r=_(s,"description",a),t=_(s,"address",a),n=()=>{if(!s)return"#";const{latitude:x,longitude:m,name:f}=s;return`https://www.google.com/maps/search/?api=1&query=${x},${m}&query_place_id=${encodeURIComponent(f)}`},c=()=>s?.contact_info?`tel:${s.contact_info.replace(/\s/g,"")}`:"#";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:e.jsx("p",{className:"text-lg text-neutral-700 leading-relaxed",children:r})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-100 rounded-xl",children:e.jsx(H,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-1",children:l("restaurant.address")}),e.jsx("p",{className:"text-neutral-600 mb-3",children:t}),e.jsxs("a",{href:n(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-primary-600 hover:text-primary-700 font-medium text-sm",children:[l("restaurant.openInMaps"),e.jsx(se,{size:14})]})]})]})}),s.contact_info&&e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-secondary-100 rounded-xl",children:e.jsx(D,{className:"w-6 h-6 text-secondary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-1",children:l("restaurant.contact")}),e.jsx("a",{href:c(),className:"text-neutral-600 hover:text-primary-600 transition-colors",children:s.contact_info})]})]})})]})]})}function pe({restaurant:s}){const{t:a}=g();return!s.social_media||!Object.values(s.social_media).some(l=>l)?null:e.jsxs("div",{className:"mt-4 bg-white rounded-2xl shadow-card p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:a("restaurant.socialMedia.title")}),e.jsxs("div",{className:"flex gap-4",children:[s.social_media.facebook&&e.jsxs("a",{href:s.social_media.facebook,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(te,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Facebook"})]}),s.social_media.instagram&&e.jsxs("a",{href:s.social_media.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg hover:bg-pink-100 transition-colors",children:[e.jsx(re,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Instagram"})]}),s.social_media.website&&e.jsxs("a",{href:s.social_media.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-neutral-100 text-neutral-700 rounded-lg hover:bg-neutral-200 transition-colors",children:[e.jsx(ae,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:a("restaurant.socialMedia.website")})]})]})]})}const ge=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function fe({restaurant:s}){const{t:a}=g();if(!s.opening_hours)return null;const l=s.opening_hours,r=[];ge.forEach(n=>{const c=l[n]||null,x=c?`${c.open}-${c.close}`:"closed",m=r[r.length-1];(m?.hours?`${m.hours.open}-${m.hours.close}`:m?.hours===null?"closed":null)===x?m.days.push(n):r.push({days:[n],hours:c})});const t=n=>{if(n.length===1)return a(`openingHours.days.${n[0]}`);if(n.length===7)return a("openingHours.everyday")||"Every day";const c=a(`openingHours.days.${n[0]}`),x=a(`openingHours.days.${n[n.length-1]}`);return`${c.substring(0,3)} - ${x.substring(0,3)}`};return e.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-6",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-primary-500"}),a("openingHours.title")]}),e.jsx("div",{className:"space-y-2",children:r.map((n,c)=>e.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-neutral-100 last:border-0",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:t(n.days)}),e.jsx("span",{className:n.hours?"text-neutral-600":"text-neutral-400",children:n.hours?`${n.hours.open} - ${n.hours.close}`:a("openingHours.closed")})]},c))})]})}function be({restaurant:s}){const{t:a}=g();if(!s.menu_images||s.menu_images.length===0)return null;const l=r=>r.toLowerCase().endsWith(".pdf");return e.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-6",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-primary-500"}),a("restaurant.menu")]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s.menu_images.map((r,t)=>e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"block overflow-hidden rounded-xl border border-neutral-200 hover:shadow-lg transition-shadow",children:l(r)?e.jsxs("div",{className:"w-full h-40 bg-neutral-50 flex flex-col items-center justify-center",children:[e.jsx(le,{size:40,className:"text-red-500 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:a("restaurant.viewMenu")||"View Menu"}),e.jsx("span",{className:"text-xs text-neutral-500 mt-1",children:"PDF"})]}):e.jsx("img",{src:r,alt:`Menu ${t+1}`,className:"w-full h-40 object-cover hover:scale-105 transition-transform"})},t))})]})}function je({restaurant:s,lang:a}){const{t:l}=g(),r=_(s,"name",a),t=()=>de(s.google_maps_url,s.latitude,s.longitude,s.name,a);return e.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-card p-6",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-primary-500"}),l("restaurant.location")]}),e.jsx("div",{className:"aspect-video rounded-xl overflow-hidden bg-neutral-100",children:e.jsx("iframe",{title:`${r} location`,width:"100%",height:"100%",style:{border:0},loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",src:t()})})]})}function we({restaurant:s,lang:a}){const{t:l}=g(),r=_(s,"name",a);return!s.gallery_images||s.gallery_images.length===0?null:e.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-card p-6",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-primary-500"}),l("restaurant.photos")]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.gallery_images.map((t,n)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden bg-neutral-100 group relative",children:[e.jsx("img",{src:t,alt:`${r} photo ${n+1}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},n))})]})}function ve({restaurantId:s}){const{user:a}=R(),[l,r]=o.useState([]),[t,n]=o.useState(!0),[c,x]=o.useState(null),m=o.useCallback(async()=>{n(!0),x(null);try{const{data:h,error:u}=await k.from("reviews").select("*").eq("restaurant_id",s).order("created_at",{ascending:!1});if(u)throw u;r(h||[])}catch(h){const u=h instanceof Error?h.message:"Failed to load reviews";x(u)}finally{n(!1)}},[s]);return o.useEffect(()=>{m()},[m]),{reviews:l,isLoading:t,error:c,submitReview:async(h,u,b=null)=>{if(!a)return{error:"You must be logged in to submit a review"};try{const i=b?URL.createObjectURL(b):null,p={restaurant_id:s,user_id:a.id,rating:h,comment:u,image_url:i},{error:j}=await k.from("reviews").insert(p);if(j)throw j;return await m(),{error:null}}catch(i){return{error:i instanceof Error?i.message:"Failed to submit review"}}},deleteReview:async h=>{if(!a)return{error:"You must be logged in to delete a review"};try{const{error:u}=await k.from("reviews").delete().eq("id",h).eq("user_id",a.id);if(u)throw u;return await m(),{error:null}}catch(u){return{error:u instanceof Error?u.message:"Failed to delete review"}}},refetch:m}}function Ne({restaurantId:s,lang:a,onAuthRequired:l}){const{t:r}=g(),{user:t}=R(),{reviews:n,isLoading:c,submitReview:x,deleteReview:m}=ve({restaurantId:s||""}),[f,v]=o.useState(!1),[h,u]=o.useState(5),[b,i]=o.useState(""),[p,j]=o.useState(!1),[y,N]=o.useState(null),[O,S]=o.useState(null),[$,M]=o.useState(null),T=()=>{t?v(!0):l()},E=d=>{const w=d.target.files?.[0];if(w){if(w.size>2*1024*1024){N(r("submit.form.uploadHint"));return}S(w);const L=new FileReader;L.onloadend=()=>{M(L.result)},L.readAsDataURL(w)}},V=()=>{S(null),M(null)},G=async d=>{d.preventDefault(),j(!0),N(null);const{error:w}=await x(h,b,O);w?N(w):(v(!1),i(""),u(5),S(null),M(null)),j(!1)},K=async d=>{await m(d)};return e.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-primary-500"}),r("reviews.title"),e.jsxs("span",{className:"text-neutral-400 font-normal",children:["(",n.length,")"]})]}),e.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-xl transition-colors",children:[e.jsx(C,{size:16}),r("reviews.writeReview")]})]}),f&&t&&e.jsxs("form",{onSubmit:G,className:"mb-6 p-4 bg-neutral-50 rounded-xl",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("reviews.yourRating")}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(d=>e.jsx("button",{type:"button",onClick:()=>u(d),className:"transition-colors",children:e.jsx(C,{size:28,className:d<=h?"fill-amber-400 text-amber-400":"text-neutral-300"})},d))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-neutral-700 mb-2",children:r("reviews.yourReview")}),e.jsx("textarea",{id:"comment",value:b,onChange:d=>i(d.target.value),placeholder:r("reviews.reviewPlaceholder"),rows:3,required:!0,className:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:border-primary-400 focus:ring-4 focus:ring-primary-100 focus:outline-none transition-all resize-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:r("reviews.addPhoto")}),$?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:$,alt:"Preview",className:"h-32 w-auto rounded-lg object-cover border border-neutral-200"}),e.jsx("button",{type:"button",onClick:V,className:"absolute -top-2 -right-2 p-1 bg-white rounded-full shadow-md text-neutral-500 hover:text-red-500 transition-colors","aria-label":r("reviews.removePhoto"),children:e.jsx(A,{size:16})})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-white border border-neutral-300 rounded-xl text-sm font-medium text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(U,{size:18}),r("reviews.uploadPhoto"),e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]}),e.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-white border border-neutral-300 rounded-xl text-sm font-medium text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(ie,{size:18}),r("reviews.takePhoto"),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:E,className:"hidden"})]})]}),e.jsx("p",{className:"mt-1 text-xs text-neutral-400",children:r("reviews.photoHint")})]}),y&&e.jsx("p",{className:"text-red-600 text-sm mb-4",children:y}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-medium rounded-xl transition-colors",children:r(p?"common.loading":"reviews.submitReview")}),e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-6 py-2 bg-neutral-200 hover:bg-neutral-300 text-neutral-700 font-medium rounded-xl transition-colors",children:r("common.cancel")})]})]}),c?e.jsx("div",{className:"space-y-4",children:[1,2].map(d=>e.jsx("div",{className:"h-24 rounded-xl animate-shimmer"},d))}):n.length===0?e.jsxs("div",{className:"text-center py-8 text-neutral-500",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-3 text-neutral-300"}),e.jsx("p",{children:r("reviews.noReviews")})]}):e.jsx("div",{className:"space-y-4",children:n.map(d=>e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-200 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(w=>e.jsx(C,{size:14,className:w<=d.rating?"fill-amber-400 text-amber-400":"text-neutral-300"},w))}),e.jsx("p",{className:"text-xs text-neutral-400",children:new Date(d.created_at).toLocaleDateString(a)})]})]}),t?.id===d.user_id&&e.jsx("button",{onClick:()=>K(d.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors","aria-label":r("reviews.deleteReview"),children:e.jsx(oe,{size:16})})]}),e.jsx("p",{className:"text-neutral-700",children:d.comment}),d.image_url&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:d.image_url,alt:"Review attachment",className:"max-h-48 rounded-lg object-cover border border-neutral-200"})})]},d.id))})]})}function ye({isOpen:s,onClose:a,restaurantId:l,userId:r}){const{t}=g(),[n,c]=o.useState(""),[x,m]=o.useState(""),[f,v]=o.useState(""),[h,u]=o.useState(!1);if(!s)return null;const b=async i=>{if(i.preventDefault(),!(!n||!x)){u(!0);try{const{error:p}=await k.from("restaurant_reports").insert({restaurant_id:l,user_id:r||null,field_name:n,suggested_value:x,reason:f||null});if(p)throw p;a(),c(""),m(""),v(""),alert(t("restaurant.reportModal.success"))}catch(p){console.error("Report submission error:",p),alert(t("restaurant.reportModal.error"))}finally{u(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-neutral-100 flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:t("restaurant.reportModal.title")}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-neutral-100 rounded-full transition-colors",children:e.jsx(A,{size:20,className:"text-neutral-500"})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:t("restaurant.reportModal.fieldLabel")}),e.jsxs("select",{value:n,onChange:i=>c(i.target.value),required:!0,onInvalid:i=>i.target.setCustomValidity(t("restaurant.reportModal.selectField")),onInput:i=>i.target.setCustomValidity(""),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:t("restaurant.reportModal.selectField")}),e.jsx("option",{value:"pet_policy",children:t("restaurant.reportModal.fields.pet_policy")}),e.jsx("option",{value:"contact_info",children:t("restaurant.reportModal.fields.contact_info")}),e.jsx("option",{value:"address",children:t("restaurant.reportModal.fields.address")}),e.jsx("option",{value:"cuisine_type",children:t("restaurant.reportModal.fields.cuisine_type")}),e.jsx("option",{value:"other",children:t("restaurant.reportModal.fields.other")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:t("restaurant.reportModal.suggestedValue")}),e.jsx("textarea",{value:x,onChange:i=>m(i.target.value),required:!0,onInvalid:i=>i.target.setCustomValidity(t("restaurant.reportModal.validation.required")),onInput:i=>i.target.setCustomValidity(""),rows:3,className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:t("restaurant.reportModal.reason")}),e.jsx("textarea",{value:f,onChange:i=>v(i.target.value),placeholder:t("restaurant.reportModal.reasonPlaceholder"),rows:2,className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-neutral-600 hover:bg-neutral-50 rounded-lg font-medium transition-colors",children:t("common.cancel")}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors disabled:opacity-50",children:t(h?"common.loading":"common.submit")})]})]})]})})}function _e(){const{t:s}=g();return e.jsx("footer",{className:"bg-neutral-900 text-neutral-400 py-8 mt-16",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:e.jsx("p",{className:"text-sm",children:s("footer.copyright")})})})}function ke(){return e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsx("div",{className:"h-64 md:h-96 animate-shimmer"}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 w-3/4 rounded-lg animate-shimmer"}),e.jsx("div",{className:"h-6 w-1/2 rounded-lg animate-shimmer"}),e.jsx("div",{className:"h-32 rounded-xl animate-shimmer"})]})})]})}function Re({error:s}){const{t:a}=g();return e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 mb-4",children:a("errors.loadingRestaurants")}),e.jsx("p",{className:"text-neutral-600 mb-6",children:s}),e.jsxs(z,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-500 text-white rounded-xl font-medium hover:bg-primary-600 transition-colors",children:[e.jsx(F,{size:18}),a("restaurant.backToList")]})]})})}function Fe(){const{id:s}=W(),{i18n:a}=g(),l=a.language,{user:r}=R(),[t,n]=o.useState(null),[c,x]=o.useState(!0),[m,f]=o.useState(null),[v,h]=o.useState(!1),[u,b]=o.useState(!1),[i,p]=o.useState(!1);return o.useEffect(()=>{const j=()=>{b(window.scrollY>10)};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]),o.useEffect(()=>{async function j(){if(s){x(!0),f(null);try{const{data:y,error:N}=await k.from("restaurants").select("*").eq("id",s).single();if(N)throw N;n(y)}catch(y){const N=y instanceof Error?y.message:"Failed to load restaurant";f(N)}finally{x(!1)}}}j()},[s]),c?e.jsx(ke,{}):m||!t?e.jsx(Re,{error:m||"Restaurant not found"}):e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsx(me,{isScrolled:u,onLoginClick:()=>h(!0)}),e.jsx(ue,{restaurant:t,lang:l}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx(xe,{restaurant:t,onReportClick:()=>p(!0)}),e.jsx(he,{restaurant:t,lang:l}),e.jsx(pe,{restaurant:t}),e.jsx(fe,{restaurant:t}),e.jsx(be,{restaurant:t}),e.jsx(je,{restaurant:t,lang:l}),e.jsx(we,{restaurant:t,lang:l}),e.jsx(Ne,{restaurantId:t.id,lang:l,onAuthRequired:()=>h(!0)})]}),e.jsx(_e,{}),e.jsx(B,{isOpen:v,onClose:()=>h(!1)}),e.jsx(ye,{isOpen:i,onClose:()=>p(!1),restaurantId:t.id,userId:r?.id})]})}export{Fe as RestaurantDetail};
