import{u as g,j as t,s as x}from"./index-da4C4Nok.js";import{r as n}from"./react-vendor-B-2HpIm1.js";import{M as f,c as h,B as j,a2 as v,O as N,q as k,t as u}from"./ui-vendor-BzBFCVgS.js";import"./supabase-K6a4hp2a.js";const w={bug:j,feature:h,general:f},y={bug:"text-red-500 bg-red-50",feature:"text-amber-500 bg-amber-50",general:"text-blue-500 bg-blue-50"},S={pending:"bg-amber-100 text-amber-700",reviewed:"bg-blue-100 text-blue-700",resolved:"bg-green-100 text-green-700"};function E(){const{t:s}=g(),[c,b]=n.useState([]),[p,i]=n.useState(!0),[r,m]=n.useState("all"),o=async()=>{i(!0);let e=x.from("app_feedback").select("*").order("created_at",{ascending:!1});r!=="all"&&(e=e.eq("status",r));const{data:a,error:d}=await e;!d&&a&&b(a),i(!1)};n.useEffect(()=>{o()},[r]);const l=async(e,a)=>{const{error:d}=await x.from("app_feedback").update({status:a,updated_at:new Date().toISOString()}).eq("id",e);d?u.error("Failed to update status"):(u.success(s("admin.feedback.statusUpdated")||"Status updated"),o())};return t.jsxs("div",{children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:s("admin.feedback.title")||"User Feedback"}),t.jsx("p",{className:"text-neutral-500 mt-1",children:s("admin.feedback.subtitle")||"View and manage user feedback"})]})}),t.jsx("div",{className:"flex gap-2 mb-6",children:["all","pending","reviewed","resolved"].map(e=>t.jsx("button",{onClick:()=>m(e),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${r===e?"bg-primary-500 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,children:s(`admin.feedback.status.${e}`)||e},e))}),t.jsx("div",{className:"space-y-4",children:p?t.jsx("div",{className:"text-center py-12 text-neutral-500",children:"Loading..."}):c.length===0?t.jsx("div",{className:"text-center py-12 text-neutral-500",children:s("admin.feedback.empty")||"No feedback yet"}):c.map(e=>{const a=w[e.type];return t.jsx("div",{className:"bg-white rounded-xl border border-neutral-200 p-5",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.jsx("div",{className:`p-2 rounded-lg ${y[e.type]}`,children:t.jsx(a,{size:18})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${S[e.status]}`,children:s(`admin.feedback.status.${e.status}`)||e.status}),t.jsx("span",{className:"text-xs text-neutral-400",children:new Date(e.created_at).toLocaleString()})]}),t.jsx("p",{className:"text-neutral-900 whitespace-pre-wrap",children:e.message}),e.contact_email&&t.jsxs("p",{className:"text-sm text-neutral-500 mt-2",children:["ðŸ“§ ",e.contact_email]}),e.page_url&&t.jsxs("p",{className:"text-xs text-neutral-400 mt-1 truncate",children:["ðŸ“ ",e.page_url]})]})]}),t.jsxs("div",{className:"flex gap-1",children:[e.status!=="reviewed"&&t.jsx("button",{onClick:()=>l(e.id,"reviewed"),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"Mark as Reviewed",children:t.jsx(v,{size:18})}),e.status!=="resolved"&&t.jsx("button",{onClick:()=>l(e.id,"resolved"),className:"p-2 text-green-500 hover:bg-green-50 rounded-lg transition-colors",title:"Mark as Resolved",children:t.jsx(N,{size:18})}),e.status!=="pending"&&t.jsx("button",{onClick:()=>l(e.id,"pending"),className:"p-2 text-amber-500 hover:bg-amber-50 rounded-lg transition-colors",title:"Mark as Pending",children:t.jsx(k,{size:18})})]})]})},e.id)})})]})}export{E as AdminFeedback};
