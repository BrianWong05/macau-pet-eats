import{s as b,u as y,j as e,a as w}from"./index-4AVTqMrf.js";import{g as J,L as _,r as l}from"./react-vendor-7d_4YsRm.js";import{D as K,R as V,J as X,K as G,O as ee,Q as te,x as se,A as re,g as ae,L as ne,h as le,V as ie,P as q,H as R,S as T,d as M,W as D,Y as H,t as u,w as I,Z as oe,X as ce,_ as de}from"./ui-vendor-f2-SRabJ.js";import{u as me}from"./useFavorites-Xh6cv257.js";import{R as ue}from"./index-DY1YsIeT.js";import{A as xe}from"./index-Cnrm7OgF.js";import{L as pe}from"./index-CfHjzltl.js";import"./supabase-K6a4hp2a.js";import"./index-CUr1kYae.js";async function he(){const{data:{user:t}}=await b.auth.getUser();if(!t)return[];const{data:r,error:n}=await b.from("user_pets").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});return n?(console.error("Error fetching user pets:",n),[]):r||[]}async function be(t){const{data:{user:r}}=await b.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:n,error:a}=await b.from("user_pets").insert({user_id:r.id,name:t.name,type:t.type.toLowerCase(),size:t.size,breed:t.breed||null,image_url:t.image_url||null}).select().single();if(a)throw console.error("Error creating pet:",a),a;return n}async function fe(t,r){const{data:{user:n}}=await b.auth.getUser();if(!n)throw new Error("User not authenticated");const a={};r.name!==void 0&&(a.name=r.name),r.type!==void 0&&(a.type=r.type.toLowerCase()),r.size!==void 0&&(a.size=r.size),r.breed!==void 0&&(a.breed=r.breed),r.image_url!==void 0&&(a.image_url=r.image_url);const{data:o,error:d}=await b.from("user_pets").update(a).eq("id",t).eq("user_id",n.id).select().single();if(d)throw console.error("Error updating pet:",d),d;return o}async function ge(t){const{data:{user:r}}=await b.auth.getUser();if(!r)throw new Error("User not authenticated");const{error:n}=await b.from("user_pets").delete().eq("id",t).eq("user_id",r.id);if(n)throw console.error("Error deleting pet:",n),n;return!0}const je=["dog","cat","bird","rabbit","other"],ve=[{value:"small",label:"Small (< 10kg)"},{value:"medium",label:"Medium (10-25kg)"},{value:"large",label:"Large (> 25kg)"}],O={dog:ee,cat:G,bird:X,rabbit:V,other:K},Ne={small:"S",medium:"M",large:"L"},ye={small:"bg-green-100 text-green-700",medium:"bg-amber-100 text-amber-700",large:"bg-red-100 text-red-700"};function we({pet:t,onEdit:r,onDelete:n}){const{t:a}=y(["common"]),o=O[t.type]||O.other;return e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center relative",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover"}):e.jsx(o,{size:64,className:"text-primary-300"}),e.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 rounded-full text-xs font-bold ${ye[t.size]}`,children:Ne[t.size]})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg text-neutral-900",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[e.jsx(o,{size:16}),e.jsx("span",{className:"capitalize",children:t.type}),t.breed&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:t.breed})]})]}),(r||n)&&e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-neutral-100",children:[r&&e.jsxs("button",{onClick:()=>r(t),className:"flex-1 inline-flex items-center justify-center gap-1 py-1.5 text-sm text-neutral-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",children:[e.jsx(te,{size:14}),a("common:edit")]}),n&&e.jsxs("button",{onClick:()=>n(t.id),className:"flex-1 inline-flex items-center justify-center gap-1 py-1.5 text-sm text-neutral-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(se,{size:14}),a("common:delete")]})]})]})]})}function ke(){const{t}=y(["profile","restaurant","auth","common"]),{user:r,username:n,signOut:a}=w(),o=J();return e.jsxs("header",{className:"bg-white border-b border-neutral-200 px-4 py-3 flex items-center justify-between shrink-0 z-20 sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-2 hover:bg-neutral-100 rounded-xl transition-colors","aria-label":t("restaurant:backToList"),children:e.jsx(re,{size:20,className:"text-neutral-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-neutral-900",children:n||t("profile:title")}),r?.email&&e.jsx("p",{className:"text-sm text-neutral-500 hidden sm:block",children:r.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsxs(e.Fragment,{children:[e.jsx(_,{to:"/profile",className:"p-2 hover:bg-neutral-100 rounded-xl transition-colors text-primary-600",title:t("profile:title"),children:e.jsx(ae,{size:20})}),e.jsx("button",{onClick:()=>a(),className:"p-2 hover:bg-neutral-100 rounded-xl transition-colors text-neutral-600 hover:text-red-600",title:t("auth:logout")||"Logout",children:e.jsx(ne,{size:20})})]}),e.jsxs(_,{to:"/submit",className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-neutral-200 rounded-xl text-sm font-medium text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(le,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:t("common:nav.submit")})]}),e.jsx(pe,{})]})]})}function Ce(){const{t}=y(["profile","common"]),{username:r,updateUsername:n}=w(),[a,o]=l.useState(!1),[d,p]=l.useState(r||""),[x,f]=l.useState(!1),g=async()=>{if(!d.trim()){u.error(t("profile:usernameRequired"));return}f(!0);const{error:m}=await n(d.trim());f(!1),m?u.error(t("common:error")):(u.success(t("profile:usernameUpdated")),o(!1))};return a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:m=>p(m.target.value),className:"text-xl font-bold text-neutral-900 border-b-2 border-primary-500 bg-transparent outline-none px-1",placeholder:t("profile:usernamePlaceholder"),autoFocus:!0}),e.jsx("button",{onClick:g,disabled:x,className:"p-1 text-green-600 hover:bg-green-50 rounded-full transition-colors",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>{o(!1),p(r||"")},className:"p-1 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:e.jsx(ce,{size:18})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:r||t("profile:setUsername")}),e.jsx("button",{onClick:()=>o(!0),className:"p-1 text-neutral-400 hover:text-primary-600 hover:bg-primary-50 rounded-full transition-colors",title:t("profile:editUsername"),children:e.jsx(de,{size:16})})]})}function ze(){const{t}=y(["profile","common"]),{user:r,username:n,avatarUrl:a,updateAvatar:o}=w(),[d,p]=l.useState(!1),x=async g=>{const m=g.target.files?.[0];if(!m)return;if(!m.type.startsWith("image/")){u.error(t("common:uploadError"));return}if(m.size>2*1024*1024){u.error(t("profile:avatarTooLarge"));return}p(!0);const{error:j}=await o(m);p(!1),j?u.error(t("common:error")):u.success(t("profile:avatarUpdated"))},f=(n||r?.email?.charAt(0)||"?").charAt(0).toUpperCase();return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("label",{className:"relative w-20 h-20 cursor-pointer group",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",disabled:d}),a?e.jsx("img",{src:a,alt:"Avatar",className:"w-20 h-20 rounded-full object-cover border-2 border-neutral-200 group-hover:border-primary-400 transition-colors"}):e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center border-2 border-transparent group-hover:border-primary-400 transition-colors",children:e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:f})}),d?e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(I,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),e.jsxs("label",{className:"text-sm text-primary-600 hover:text-primary-700 cursor-pointer font-medium flex items-center gap-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",disabled:d}),e.jsx(I,{size:14}),t("profile:changePhoto")]})]})}function Re(){const{t}=y(["profile","common","submit","feedback","auth"]),{user:r}=w(),[n,a]=l.useState("pets"),{favorites:o,isLoading:d}=me(),[p,x]=l.useState([]),[f,g]=l.useState(!0),[m,j]=l.useState(!1),[v,N]=l.useState(null),[k,i]=l.useState(!1),[P,L]=l.useState([]),[B,C]=l.useState(!0),[U,E]=l.useState([]),[Q,z]=l.useState(!0),[$,A]=l.useState([]),[W,S]=l.useState(!0);l.useEffect(()=>{(async()=>{if(!r){x([]),g(!1);return}g(!0);const c=await he();x(c),g(!1)})()},[r]),l.useEffect(()=>{(async()=>{if(!r){L([]),C(!1);return}C(!0);const{data:c,error:h}=await b.from("restaurants").select("*").eq("submitted_by",r.id).order("created_at",{ascending:!1});!h&&c&&L(c),C(!1)})()},[r]),l.useEffect(()=>{(async()=>{if(!r){E([]),z(!1);return}z(!0);const{data:c,error:h}=await b.from("app_feedback").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});!h&&c&&E(c),z(!1)})()},[r]),l.useEffect(()=>{(async()=>{if(!r){A([]),S(!1);return}S(!0);const{data:c,error:h}=await b.from("restaurant_reports").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});!h&&c&&A(c),S(!1)})()},[r]);const Y=async s=>{if(confirm(t("profile:pets.deleteConfirm")))try{await ge(s),x(c=>c.filter(h=>h.id!==s)),u.success(t("profile:pets.deleted"))}catch{u.error(t("common:error"))}},Z=s=>{N(s),j(!0)};return r?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsx(ke,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8 bg-white rounded-xl border border-neutral-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(ze,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Ce,{}),e.jsx("p",{className:"text-neutral-500 text-sm",children:r.email})]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>a("pets"),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${n==="pets"?"bg-primary-500 text-white":"bg-white text-neutral-600 hover:bg-neutral-100 border border-neutral-200"}`,children:[e.jsx(q,{size:18}),t("profile:tabs.pets")]}),e.jsxs("button",{onClick:()=>a("favorites"),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${n==="favorites"?"bg-primary-500 text-white":"bg-white text-neutral-600 hover:bg-neutral-100 border border-neutral-200"}`,children:[e.jsx(R,{size:18}),t("profile:tabs.favorites")]}),e.jsxs("button",{onClick:()=>a("contributions"),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${n==="contributions"?"bg-primary-500 text-white":"bg-white text-neutral-600 hover:bg-neutral-100 border border-neutral-200"}`,children:[e.jsx(T,{size:18}),t("profile:tabs.contributions")]}),e.jsxs("button",{onClick:()=>a("feedback"),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${n==="feedback"?"bg-primary-500 text-white":"bg-white text-neutral-600 hover:bg-neutral-100 border border-neutral-200"}`,children:[e.jsx(M,{size:18}),t("profile:tabs.feedback")]}),e.jsxs("button",{onClick:()=>a("reports"),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${n==="reports"?"bg-primary-500 text-white":"bg-white text-neutral-600 hover:bg-neutral-100 border border-neutral-200"}`,children:[e.jsx(D,{size:18}),t("profile:tabs.reports")]})]}),n==="pets"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>{N(null),j(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-xl transition-colors",children:[e.jsx(H,{size:18}),t("profile:pets.addPet")]}),f?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"aspect-square bg-neutral-200 rounded-xl animate-pulse"},s))}):p.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-neutral-200",children:[e.jsx(q,{size:48,className:"mx-auto text-neutral-300 mb-4"}),e.jsx("p",{className:"text-neutral-600 font-medium",children:t("profile:pets.noPets")}),e.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:t("profile:pets.noPetsHint")})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map(s=>e.jsx(we,{pet:s,onEdit:Z,onDelete:Y},s.id))})]}),n==="favorites"&&e.jsx("div",{className:"space-y-6",children:d?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx("div",{className:"h-64 bg-neutral-200 rounded-xl animate-pulse"},s))}):o.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-neutral-200",children:[e.jsx(R,{size:48,className:"mx-auto text-neutral-300 mb-4"}),e.jsx("p",{className:"text-neutral-600 font-medium",children:t("profile:favorites.noFavorites")}),e.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:t("profile:favorites.noFavoritesHint")})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>s.restaurant&&e.jsx(ue,{restaurant:s.restaurant},s.restaurant_id))})}),n==="contributions"&&e.jsx("div",{className:"space-y-6",children:B?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-24 bg-neutral-200 rounded-xl animate-pulse"},s))}):P.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-neutral-200",children:[e.jsx(T,{size:48,className:"mx-auto text-neutral-300 mb-4"}),e.jsx("p",{className:"text-neutral-600 font-medium",children:t("submit:noContributions")}),e.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:t("submit:noContributionsHint")}),e.jsxs(_,{to:"/submit",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-xl transition-colors",children:[e.jsx(H,{size:18}),t("submit:title")]})]}):e.jsx("div",{className:"space-y-4",children:P.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s.image_url&&e.jsx("img",{src:s.image_url,alt:s.name_zh||s.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 truncate",children:s.name_zh||s.name||t("common:unnamed")}),e.jsx("p",{className:"text-sm text-neutral-500 truncate",children:s.address_zh||s.address})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${s.status==="approved"?"bg-green-100 text-green-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:s.status==="approved"?t("submit:status.approved"):s.status==="rejected"?t("submit:status.rejected"):t("submit:status.pending")})]}),s.admin_comment&&e.jsxs("div",{className:"mt-3 p-3 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-1",children:t("common:adminComment")}),e.jsx("p",{className:"text-sm text-neutral-700",children:s.admin_comment})]})]},s.id))})}),n==="feedback"&&e.jsx("div",{className:"space-y-6",children:Q?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-20 bg-neutral-200 rounded-xl animate-pulse"},s))}):U.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-neutral-200",children:[e.jsx(M,{size:48,className:"mx-auto text-neutral-300 mb-4"}),e.jsx("p",{className:"text-neutral-600 font-medium",children:t("feedback:noFeedback")}),e.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:t("feedback:noFeedbackHint")})]}):e.jsx("div",{className:"space-y-4",children:U.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.type==="bug"?"bg-red-100 text-red-700":s.type==="feature"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:t(`feedback:types.${s.type}`)}),e.jsx("span",{className:"text-xs text-neutral-400",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-neutral-700 text-sm line-clamp-2",children:s.message})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${s.status==="resolved"?"bg-green-100 text-green-700":s.status==="reviewed"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:t(`feedback:status.${s.status}`)})]}),s.admin_comment&&e.jsxs("div",{className:"mt-3 p-3 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-1",children:t("common:adminComment")}),e.jsx("p",{className:"text-sm text-neutral-700",children:s.admin_comment})]})]},s.id))})}),n==="reports"&&e.jsx("div",{className:"space-y-6",children:W?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-20 bg-neutral-200 rounded-xl animate-pulse"},s))}):$.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-neutral-200",children:[e.jsx(D,{size:48,className:"mx-auto text-neutral-300 mb-4"}),e.jsx("p",{className:"text-neutral-600 font-medium",children:t("feedback:report.noReports")}),e.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:t("feedback:report.noReportsHint")})]}):e.jsx("div",{className:"space-y-4",children:$.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:s.field_name}),e.jsx("span",{className:"text-xs text-neutral-400",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-neutral-600 text-sm truncate",children:s.suggested_value})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${s.status==="approved"?"bg-green-100 text-green-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t(`feedback:report.status.${s.status}`)})]}),s.admin_comment&&e.jsxs("div",{className:"mt-3 p-3 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-1",children:t("common:adminComment")}),e.jsx("p",{className:"text-sm text-neutral-700",children:s.admin_comment})]})]},s.id))})}),m&&e.jsx(Se,{pet:v,onClose:()=>{j(!1),N(null)},onSave:async s=>{try{if(v){const c=await fe(v.id,s);x(h=>h.map(F=>F.id===v.id?c:F)),u.success(t("profile:pets.updated"))}else{const c=await be(s);x(h=>[c,...h]),u.success(t("profile:pets.added"))}j(!1),N(null)}catch{u.error(t("common:error"))}}})]})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ie,{size:40,className:"text-primary-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:t("profile:loginRequired")}),e.jsx("button",{onClick:()=>i(!0),className:"px-6 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-xl transition-colors",children:t("auth:loginButton")})]}),e.jsx(xe,{isOpen:k,onClose:()=>i(!1)})]})}function Se({pet:t,onClose:r,onSave:n}){const{t:a}=y(["profile","common"]),[o,d]=l.useState(t?.name||""),[p,x]=l.useState(t?.type||"dog"),[f,g]=l.useState(t?.size||"medium"),[m,j]=l.useState(t?.breed||""),[v,N]=l.useState(!1),k=async i=>{if(i.preventDefault(),!o.trim()){u.error(a("profile:pets.namePlaceholder"));return}N(!0),await n({name:o,type:p,size:f,breed:m||null}),N(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:a(t?"profile:pets.editPet":"profile:pets.addPet")}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:a("profile:pets.name")}),e.jsx("input",{type:"text",value:o,onChange:i=>d(i.target.value),placeholder:a("profile:pets.namePlaceholder"),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:a("profile:pets.type")}),e.jsx("select",{value:p,onChange:i=>x(i.target.value),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary-500",children:je.map(i=>e.jsx("option",{value:i,children:a(`profile:pets.types.${i}`)},i))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:a("profile:pets.size")}),e.jsx("select",{value:f,onChange:i=>g(i.target.value),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary-500",children:ve.map(i=>e.jsx("option",{value:i.value,children:a(`profile:pets.sizes.${i.value}`)},i.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:a("profile:pets.breed")}),e.jsx("input",{type:"text",value:m,onChange:i=>j(i.target.value),placeholder:a("profile:pets.breedPlaceholder"),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-neutral-600 hover:bg-neutral-100 rounded-xl transition-colors",children:a("common:cancel")}),e.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-xl transition-colors disabled:opacity-50",children:a(v?"common:loading":"common:save")})]})]})]})})}export{Re as Profile};
